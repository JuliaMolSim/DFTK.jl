<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Notation and conventions · DFTK.jl</title><link rel="canonical" href="https://juliamolsim.github.io/DFTK.jl/stable/advanced/conventions/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="DFTK.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">DFTK.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../../guide/installation/">Installation</a></li><li><a class="tocitem" href="../../guide/tutorial/">Tutorial</a></li><li><a class="tocitem" href="../../guide/input_output/">Input and output formats</a></li><li><a class="tocitem" href="../../guide/parallelization/">Timings and parallelization</a></li><li><a class="tocitem" href="../../guide/periodic_problems/">Introduction to periodic problems</a></li><li><a class="tocitem" href="../../guide/density_functional_theory/">Density-functional theory</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/metallic_systems/">Temperature and metallic systems</a></li><li><a class="tocitem" href="../../examples/pymatgen/">Creating supercells with pymatgen</a></li><li><a class="tocitem" href="../../examples/ase/">Creating slabs with ASE</a></li><li><a class="tocitem" href="../../examples/collinear_magnetism/">Collinear spin and magnetic systems</a></li><li><a class="tocitem" href="../../examples/geometry_optimization/">Geometry optimization</a></li><li><a class="tocitem" href="../../examples/scf_callbacks/">Monitoring self-consistent field calculations</a></li><li><a class="tocitem" href="../../examples/scf_checkpoints/">Saving SCF results on disk and SCF checkpoints</a></li><li><a class="tocitem" href="../../examples/polarizability/">Polarizability by linear response</a></li><li><a class="tocitem" href="../../examples/gross_pitaevskii/">Gross-Pitaevskii equation in one dimension</a></li><li><a class="tocitem" href="../../examples/gross_pitaevskii_2D/">Gross-Pitaevskii equation with external magnetic field</a></li><li><a class="tocitem" href="../../examples/cohen_bergstresser/">Cohen-Bergstresser model</a></li><li><a class="tocitem" href="../../examples/arbitrary_floattype/">Arbitrary floating-point types</a></li><li><a class="tocitem" href="../../examples/forwarddiff/">Polarizability using automatic differentiation</a></li><li><a class="tocitem" href="../../examples/custom_solvers/">Custom solvers</a></li><li><a class="tocitem" href="../../examples/custom_potential/">Custom potential</a></li><li><a class="tocitem" href="../../examples/wannier90/">Wannierization using Wannier90</a></li></ul></li><li><span class="tocitem">Advanced topics</span><ul><li class="is-active"><a class="tocitem" href>Notation and conventions</a><ul class="internal"><li><a class="tocitem" href="#Usage-of-unicode-characters"><span>Usage of unicode characters</span></a></li><li><a class="tocitem" href="#symbol-conventions"><span>Symbol conventions</span></a></li><li><a class="tocitem" href="#Units"><span>Units</span></a></li><li><a class="tocitem" href="#conventions-lattice"><span>Lattices and lattice vectors</span></a></li><li><a class="tocitem" href="#Reduced-and-cartesian-coordinates"><span>Reduced and cartesian coordinates</span></a></li><li><a class="tocitem" href="#Normalization-conventions"><span>Normalization conventions</span></a></li></ul></li><li><a class="tocitem" href="../data_structures/">Data structures</a></li><li><a class="tocitem" href="../useful_formulas/">Useful formulas</a></li><li><a class="tocitem" href="../symmetries/">Crystal symmetries</a></li></ul></li><li><a class="tocitem" href="../../api/">API reference</a></li><li><a class="tocitem" href="../../publications/">Publications</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced topics</a></li><li class="is-active"><a href>Notation and conventions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Notation and conventions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaMolSim/DFTK.jl/blob/master/docs/src/advanced/conventions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Notation-and-conventions"><a class="docs-heading-anchor" href="#Notation-and-conventions">Notation and conventions</a><a id="Notation-and-conventions-1"></a><a class="docs-heading-anchor-permalink" href="#Notation-and-conventions" title="Permalink"></a></h1><h2 id="Usage-of-unicode-characters"><a class="docs-heading-anchor" href="#Usage-of-unicode-characters">Usage of unicode characters</a><a id="Usage-of-unicode-characters-1"></a><a class="docs-heading-anchor-permalink" href="#Usage-of-unicode-characters" title="Permalink"></a></h2><p>DFTK liberally uses unicode characters to represent Greek characters (e.g. ψ, ρ, ε...). Make sure you use the proper <a href="https://github.com/JuliaEditorSupport/">Julia plugins</a> to simplify typing them.</p><h2 id="symbol-conventions"><a class="docs-heading-anchor" href="#symbol-conventions">Symbol conventions</a><a id="symbol-conventions-1"></a><a class="docs-heading-anchor-permalink" href="#symbol-conventions" title="Permalink"></a></h2><ul><li><strong>Reciprocal-space vectors:</strong> <span>$k$</span> for vectors in the Brillouin zone, <span>$G$</span> for vectors of the reciprocal lattice, <span>$q$</span> for general vectors</li><li><strong>Real-space vectors:</strong> <span>$R$</span> for lattice vectors, <span>$r$</span> and <span>$x$</span> are usually used for unit for vectors in the unit cell or general real-space vectors, respectively. This convention is, however, less consistently applied.</li><li><span>$\Omega$</span> is the unit cell, and <span>$|\Omega|$</span> (or sometimes just <span>$\Omega$</span>) is its volume.</li><li><span>$A$</span> are the real-space lattice vectors (<code>model.lattice</code>) and <span>$B$</span> the Brillouin zone lattice vectors (<code>model.recip_lattice</code>).</li><li>The <strong>Bloch waves</strong> are<p class="math-container">\[\psi_{nk}(x) = e^{ik\cdot x} u_{nk}(x),\]</p>where <span>$n$</span> is the band index and <span>$k$</span> the <span>$k$</span>-point. In the code we sometimes use <span>$\psi$</span> and <span>$u$</span> interchangeably.</li><li><span>$\varepsilon$</span> are the <strong>eigenvalues</strong>, <span>$\varepsilon_F$</span> is the <strong>Fermi level</strong>.</li><li><span>$\rho$</span> is the <strong>density</strong>.</li><li>In the code we use <strong>normalized plane waves</strong>:<p class="math-container">\[e_G(r) = \frac 1 {\sqrt{\Omega}} e^{i G \cdot r}.\]</p></li><li><span>$Y^l_m$</span> are the complex <strong>spherical harmonics</strong>, and <span>$Y_{lm}$</span> the real ones.</li><li><span>$j_l$</span> are the <strong>Bessel functions</strong>. In particular, <span>$j_{0}(x) = \frac{\sin x}{x}$</span>.</li></ul><h2 id="Units"><a class="docs-heading-anchor" href="#Units">Units</a><a id="Units-1"></a><a class="docs-heading-anchor-permalink" href="#Units" title="Permalink"></a></h2><p>In DFTK, atomic units are used throughout, most importantly lengths are in Bohr and energies in Hartree. See <a href="https://en.wikipedia.org/wiki/Hartree_atomic_units">wikipedia</a> for a list of conversion factors. Appropriate unit conversion can can be performed using the <code>Unitful</code> and <code>UnitfulAtomic</code> packages:</p><pre><code class="language-julia">using Unitful
using UnitfulAtomic
austrip(10u&quot;eV&quot;)      # 10eV in Hartree</code></pre><pre class="documenter-example-output">0.367493221755186</pre><pre><code class="language-julia">using Unitful: Å
using UnitfulAtomic
auconvert(Å, 1.2)  # 1.2 Bohr in Ångström</code></pre><pre class="documenter-example-output">0.6350126530835999 Å</pre><div class="admonition is-warning"><header class="admonition-header">Differing unit conventions</header><div class="admonition-body"><p>Different electronic-structure codes use different unit conventions. For example for lattice vectors the common length units are Bohr (used by DFTK) and Ångström (used e.g. by ASE, 1Å ≈ 1.80 Bohr). When setting up a calculation for DFTK one needs to ensure to convert to Bohr and atomic units. For some Python libraries (currently ASE, pymatgen and abipy) DFTK directly ships conversion tools in form of the <a href="../../api/#DFTK.load_lattice-Tuple"><code>load_lattice</code></a> and <a href="../../api/#DFTK.load_atoms-Tuple"><code>load_atoms</code></a> functions, which take care of such conversions. Examples which demonstrate this are <a href="../../examples/ase/#Creating-slabs-with-ASE">Creating slabs with ASE</a> and <a href="../../examples/pymatgen/#Creating-supercells-with-pymatgen">Creating supercells with pymatgen</a>.</p></div></div><h2 id="conventions-lattice"><a class="docs-heading-anchor" href="#conventions-lattice">Lattices and lattice vectors</a><a id="conventions-lattice-1"></a><a class="docs-heading-anchor-permalink" href="#conventions-lattice" title="Permalink"></a></h2><p>Both the real-space lattice (i.e. <code>model.lattice</code>) and reciprocal-space lattice (<code>model.recip_lattice</code>) contain the lattice vectors in columns. For example, <code>model.lattice[:, 1]</code> is the first real-space lattice vector. If 1D or 2D problems are to be treated these arrays are still <span>$3 \times 3$</span> matrices, but contain two or one zero-columns, respectively. The real-space lattice vectors are sometimes referred to by <span>$A$</span> and the reciprocal-space lattice vectors by <span>$B = 2\pi A^{-T}$</span>.</p><div class="admonition is-warning"><header class="admonition-header">Row-major versus column-major storage order</header><div class="admonition-body"><p>Julia stores matrices as column-major, but other languages (notably Python and C) use row-major ordering. Care therefore needs to be taken to properly transpose the unit cell matrices <span>$A$</span> before using it with DFTK. For the supported third-party packages <code>load_lattice</code> and <code>load_atoms</code> again handle such conversion automatically.</p></div></div><p>We use the convention that the unit cell in real space is <span>$[0, 1)^3$</span> in reduced coordinates and the unit cell in reciprocal space (the reducible Brillouin zone) is <span>$[-1/2, 1/2)^3$</span>.</p><h2 id="Reduced-and-cartesian-coordinates"><a class="docs-heading-anchor" href="#Reduced-and-cartesian-coordinates">Reduced and cartesian coordinates</a><a id="Reduced-and-cartesian-coordinates-1"></a><a class="docs-heading-anchor-permalink" href="#Reduced-and-cartesian-coordinates" title="Permalink"></a></h2><p>Unless denoted otherwise the code uses <strong>reduced coordinates</strong> for reciprocal-space vectors such as <span>$k$</span>,  <span>$G$</span>, <span>$q$</span> or real-space vectors like <span>$r$</span> and <span>$R$</span> (see <a href="#symbol-conventions">Symbol conventions</a>). One switches to Cartesian coordinates by</p><p class="math-container">\[x_\text{cart} = M x_\text{red}\]</p><p>where <span>$M$</span> is either <span>$A$</span> / <code>model.lattice</code> (for real-space vectors) or <span>$B$</span> / <code>model.recip_lattice</code> (for reciprocal-space vectors). A useful relationship is</p><p class="math-container">\[b_\text{cart} \cdot a_\text{cart}=2\pi b_\text{red} \cdot a_\text{red}\]</p><p>if <span>$a$</span> and <span>$b$</span> are real-space and reciprocal-space vectors respectively. Other names for reduced coordinates are <strong>integer coordinates</strong> (usually for <span>$G$</span>-vectors) or <strong>fractional coordinates</strong> (usually for <span>$k$</span>-points).</p><h2 id="Normalization-conventions"><a class="docs-heading-anchor" href="#Normalization-conventions">Normalization conventions</a><a id="Normalization-conventions-1"></a><a class="docs-heading-anchor-permalink" href="#Normalization-conventions" title="Permalink"></a></h2><p>The normalization conventions used in the code is that quantities stored in reciprocal space are coefficients in the <span>$e_{G}$</span> basis, and quantities stored in real space use real physical values. This means for instance that wavefunctions in the real space grid are normalized as <span>$\frac{|\Omega|}{N} \sum_{r} |\psi(r)|^{2} = 1$</span> where <span>$N$</span> is the number of grid points and in reciprocal space its coefficients are <span>$\ell^{2}$</span>-normalized, see the discussion in section <a href="../data_structures/#PlaneWaveBasis-and-plane-wave-discretisations"><code>PlaneWaveBasis</code> and plane-wave discretisations</a> where this is demonstrated.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../examples/wannier90/">« Wannierization using Wannier90</a><a class="docs-footer-nextpage" href="../data_structures/">Data structures »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 2 December 2021 17:35">Thursday 2 December 2021</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
