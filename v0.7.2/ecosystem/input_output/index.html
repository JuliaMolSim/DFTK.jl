<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Input and output formats · DFTK.jl</title><meta name="title" content="Input and output formats · DFTK.jl"/><meta property="og:title" content="Input and output formats · DFTK.jl"/><meta property="twitter:title" content="Input and output formats · DFTK.jl"/><meta name="description" content="Documentation for DFTK.jl."/><meta property="og:description" content="Documentation for DFTK.jl."/><meta property="twitter:description" content="Documentation for DFTK.jl."/><meta property="og:url" content="https://docs.dftk.org/stable/ecosystem/input_output/"/><meta property="twitter:url" content="https://docs.dftk.org/stable/ecosystem/input_output/"/><link rel="canonical" href="https://docs.dftk.org/stable/ecosystem/input_output/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="DFTK.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DFTK.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../features/">DFTK features</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../../guide/installation/">Installation</a></li><li><a class="tocitem" href="../../guide/tutorial/">Tutorial</a></li></ul></li><li><span class="tocitem">Background</span><ul><li><a class="tocitem" href="../../guide/introductory_resources/">Introductory resources</a></li><li><a class="tocitem" href="../../guide/periodic_problems/">Periodic problems and plane-wave discretisations</a></li><li><a class="tocitem" href="../../guide/discretisation/">Comparing discretization techniques</a></li><li><a class="tocitem" href="../../guide/atomic_chains/">Modelling atomic chains</a></li><li><a class="tocitem" href="../../guide/density_functional_theory/">Introduction to density-functional theory</a></li><li><a class="tocitem" href="../../guide/self_consistent_field/">Self-consistent field methods</a></li><li><a class="tocitem" href="../../school2022/">DFTK School 2022</a></li></ul></li><li><span class="tocitem">Basic DFT calculations</span><ul><li><a class="tocitem" href="../../examples/metallic_systems/">Temperature and metallic systems</a></li><li><a class="tocitem" href="../../examples/collinear_magnetism/">Collinear spin and magnetic systems</a></li><li><a class="tocitem" href="../../examples/convergence_study/">Performing a convergence study</a></li><li><a class="tocitem" href="../../examples/pseudopotentials/">Pseudopotentials</a></li><li><a class="tocitem" href="../../examples/supercells/">Creating and modelling metallic supercells</a></li><li><a class="tocitem" href="../../examples/gaas_surface/">Modelling a gallium arsenide surface</a></li><li><a class="tocitem" href="../../examples/graphene/">Graphene band structure</a></li><li><a class="tocitem" href="../../examples/geometry_optimization/">Geometry optimization</a></li><li><a class="tocitem" href="../../examples/energy_cutoff_smearing/">Energy cutoff smearing</a></li></ul></li><li><span class="tocitem">Response and properties</span><ul><li><a class="tocitem" href="../../examples/polarizability/">Polarizability by linear response</a></li><li><a class="tocitem" href="../../examples/forwarddiff/">Polarizability using automatic differentiation</a></li></ul></li><li><span class="tocitem">Ecosystem integration</span><ul><li><a class="tocitem" href="../atomsbase/">AtomsBase integration</a></li><li><a class="tocitem" href="../atomscalculators/">AtomsCalculators integration</a></li><li class="is-active"><a class="tocitem" href>Input and output formats</a><ul class="internal"><li><a class="tocitem" href="#Reading-/-writing-files-supported-by-AtomsIO"><span>Reading / writing files supported by AtomsIO</span></a></li><li><a class="tocitem" href="#Writing-VTK-files-for-visualization"><span>Writing VTK files for visualization</span></a></li><li><a class="tocitem" href="#Parsable-data-export-using-json"><span>Parsable data-export using json</span></a></li><li><a class="tocitem" href="#Writing-and-reading-JLD2-files"><span>Writing and reading JLD2 files</span></a></li></ul></li><li><a class="tocitem" href="../atomistic_simulation_environment/">Atomistic simulation environment</a></li><li><a class="tocitem" href="../wannier/">Wannierization using Wannier.jl or Wannier90</a></li></ul></li><li><span class="tocitem">Tips and tricks</span><ul><li><a class="tocitem" href="../../tricks/parallelization/">Timings and parallelization</a></li><li><a class="tocitem" href="../../tricks/scf_checkpoints/">Saving SCF results on disk and SCF checkpoints</a></li><li><a class="tocitem" href="../../tricks/compute_clusters/">Using DFTK on compute clusters</a></li></ul></li><li><span class="tocitem">Solvers</span><ul><li><a class="tocitem" href="../../examples/custom_solvers/">Custom solvers</a></li><li><a class="tocitem" href="../../examples/scf_callbacks/">Monitoring self-consistent field calculations</a></li><li><a class="tocitem" href="../../examples/compare_solvers/">Comparison of DFT solvers</a></li><li><a class="tocitem" href="../../examples/analysing_scf_convergence/">Analysing SCF convergence</a></li></ul></li><li><span class="tocitem">Nonstandard models</span><ul><li><a class="tocitem" href="../../examples/gross_pitaevskii/">Gross-Pitaevskii equation in one dimension</a></li><li><a class="tocitem" href="../../examples/gross_pitaevskii_2D/">Gross-Pitaevskii equation with external magnetic field</a></li><li><a class="tocitem" href="../../examples/custom_potential/">Custom potential</a></li><li><a class="tocitem" href="../../examples/cohen_bergstresser/">Cohen-Bergstresser model</a></li><li><a class="tocitem" href="../../examples/anyons/">Anyonic models</a></li></ul></li><li><span class="tocitem">Error control</span><ul><li><a class="tocitem" href="../../examples/arbitrary_floattype/">Arbitrary floating-point types</a></li><li><a class="tocitem" href="../../examples/error_estimates_forces/">Practical error bounds for the forces</a></li></ul></li><li><span class="tocitem">Developer resources</span><ul><li><a class="tocitem" href="../../developer/setup/">Developer setup</a></li><li><a class="tocitem" href="../../developer/testsystem/">Unit test system</a></li><li><a class="tocitem" href="../../developer/conventions/">Notation and conventions</a></li><li><a class="tocitem" href="../../developer/style_guide/">Developer&#39;s style guide</a></li><li><a class="tocitem" href="../../developer/data_structures/">Data structures</a></li><li><a class="tocitem" href="../../developer/useful_formulas/">Useful formulas</a></li><li><a class="tocitem" href="../../developer/symmetries/">Crystal symmetries</a></li><li><a class="tocitem" href="../../developer/gpu_computations/">GPU computations</a></li></ul></li><li><a class="tocitem" href="../../api/">API reference</a></li><li><a class="tocitem" href="../../publications/">Publications</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Ecosystem integration</a></li><li class="is-active"><a href>Input and output formats</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Input and output formats</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaMolSim/DFTK.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaMolSim/DFTK.jl/blob/master/docs/src/ecosystem/input_output.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Input-and-output-formats"><a class="docs-heading-anchor" href="#Input-and-output-formats">Input and output formats</a><a id="Input-and-output-formats-1"></a><a class="docs-heading-anchor-permalink" href="#Input-and-output-formats" title="Permalink"></a></h1><p><a href="https://mybinder.org/v2/gh/JuliaMolSim/DFTK.jl/gh-pages?filepath=v0.7.2/ecosystem/input_output.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt/></a> <a href="https://nbviewer.jupyter.org/github/JuliaMolSim/DFTK.jl/blob/gh-pages/v0.7.2/ecosystem/input_output.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a></p><p>This section provides an overview of the input and output formats supported by DFTK, usually via integration with a third-party library.</p><h2 id="Reading-/-writing-files-supported-by-AtomsIO"><a class="docs-heading-anchor" href="#Reading-/-writing-files-supported-by-AtomsIO">Reading / writing files supported by AtomsIO</a><a id="Reading-/-writing-files-supported-by-AtomsIO-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-/-writing-files-supported-by-AtomsIO" title="Permalink"></a></h2><p><a href="https://github.com/mfherbst/AtomsIO.jl">AtomsIO</a> is a Julia package which supports reading / writing atomistic structures from / to a large range of file formats. Supported formats include Crystallographic Information Framework (CIF), XYZ and extxyz files, ASE / Gromacs / LAMMPS / Amber trajectory files or input files of various other codes (e.g. Quantum Espresso, VASP, ABINIT, CASTEP, …). The full list of formats is is available in the <a href="https://mfherbst.github.io/AtomsIO.jl/stable">AtomsIO documentation</a>.</p><p>The AtomsIO functionality is split into two packages. The main package, <code>AtomsIO</code> itself, only depends on packages, which are registered in the Julia General package registry. In contrast <code>AtomsIOPython</code> extends <code>AtomsIO</code> by parsers depending on python packages, which are automatically managed via <code>PythonCall</code>. While it thus provides the full set of supported IO formats, this also adds additional practical complications, so some users may choose not to use <code>AtomsIOPython</code>.</p><p>As an example we start the calculation of a simple antiferromagnetic iron crystal using a Quantum-Espresso input file, <a href="../Fe_afm.pwi">Fe_afm.pwi</a>. For more details about calculations on magnetic systems using collinear spin, see <a href="../../examples/collinear_magnetism/#Collinear-spin-and-magnetic-systems">Collinear spin and magnetic systems</a>.</p><p>First we parse the Quantum Espresso input file using AtomsIO, which reads the lattice, atomic positions and initial magnetisation from the input file and returns it as an <a href="https://github.com/JuliaMolSim/AtomsBase.jl">AtomsBase</a> <code>AbstractSystem</code>, the JuliaMolSim community standard for representing atomic systems.</p><pre><code class="language-julia hljs">using AtomsIO        # Use Julia-only IO parsers
using AtomsIOPython  # Use python-based IO parsers (e.g. ASE)
system = load_system(&quot;Fe_afm.pwi&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">FlexibleSystem(Fe₂, periodic = TTT):
    bounding_box      : [ 2.86814        0        0;
                                0  2.86814        0;
                                0        0  2.86814]u&quot;Å&quot;

    Atom(Fe, [       0,        0,        0]u&quot;Å&quot;)
    Atom(Fe, [ 1.43407,  1.43407,  1.43407]u&quot;Å&quot;)

      .------.  
     /|      |  
    * |      |  
    | | Fe   |  
    | .------.  
    |/      /   
    Fe-----*    
</code></pre><p>Next we build a model making use of the <a href="../atomsbase/#AtomsBase-integration">AtomsBase integration</a> of DFTK and supplying a pseudpotential family from the <a href="https://github.com/JuliaMolSim/PseudoPotentialData.jl">PseudoPotentialData</a></p><pre><code class="language-julia hljs">using DFTK
using PseudoPotentialData
pd_lda_family = PseudoFamily(&quot;dojo.nc.sr.lda.v0_4_1.oncvpsp3.standard.upf&quot;)
model = model_DFT(system;
                  functionals=LDA(),
                  temperature=0.01,
                  pseudopotentials=pd_lda_family)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model(lda_x+lda_c_pw, 3D):
    lattice (in Bohr)    : [5.42      , 0         , 0         ]
                           [0         , 5.42      , 0         ]
                           [0         , 0         , 5.42      ]
    unit cell volume     : 159.22 Bohr³

    atoms                : Fe₂
    atom potentials      : ElementPsp(Fe, &quot;/home/runner/.julia/artifacts/1ea71a84cf375286564538a9cab789991f4bf1f4/Fe.upf&quot;)
                           ElementPsp(Fe, &quot;/home/runner/.julia/artifacts/1ea71a84cf375286564538a9cab789991f4bf1f4/Fe.upf&quot;)

    num. electrons       : 32
    spin polarization    : collinear
    temperature          : 0.01 Ha
    smearing             : DFTK.Smearing.FermiDirac()

    terms                : Kinetic()
                           AtomicLocal()
                           AtomicNonlocal()
                           Ewald(nothing)
                           PspCorrection()
                           Hartree()
                           Xc(lda_x, lda_c_pw)
                           Entropy()</code></pre><p>Finally we run the calculation:</p><pre><code class="language-julia hljs">basis = PlaneWaveBasis(model; Ecut=10, kgrid=(2, 2, 2))
ρ0 = guess_density(basis, system)
scfres = self_consistent_field(basis, ρ=ρ0);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr33"><span class="sgr1">┌ Warning: </span></span>Negative ρcore detected: -0.010160696831626084
<span class="sgr33"><span class="sgr1">└ </span></span><span class="sgr90">@ DFTK ~/work/DFTK.jl/DFTK.jl/src/terms/xc.jl:39</span>
n     Energy            log10(ΔE)   log10(Δρ)   Magnet   Diag   Δtime
---   ---------------   ---------   ---------   ------   ----   ------
  1   -230.6835249216                    0.31   -0.519    5.4    210ms
  2   -234.0027283505        0.52       -0.24   -0.456    2.1    141ms
  3   -234.2075441607       -0.69       -1.07   -0.436    3.1    160ms
  4   -234.2078277950       -3.55       -1.70   -0.439    1.2    126ms
  5   -234.2080132734       -3.73       -2.62   -0.440    1.0    103ms
  6   -234.2080251835       -4.92       -3.12   -0.442    3.1    149ms
  7   -234.2080260340       -6.07       -3.26   -0.443    2.6    125ms
  8   -234.2080260917       -7.24       -3.29   -0.444    1.0    101ms
  9   -234.2080261811       -7.05       -3.61   -0.447    1.0    107ms
 10   -234.2080261936       -7.90       -3.62   -0.448    1.0    101ms
 11   -234.2080262821       -7.05       -3.72   -0.452    1.0    107ms
 12   -234.2080262784   +   -8.43       -3.72   -0.452    1.0    104ms
 13   -234.2080262544   +   -7.62       -3.70   -0.450    1.0    107ms
 14   -234.2080266515       -6.40       -3.68   -0.484    2.4    137ms
 15   -234.2080268743       -6.65       -3.49   -0.513    2.2    131ms
 16   -234.2080269861       -6.95       -3.88   -0.557    3.0    153ms
 17   -234.2080269886       -8.60       -4.64   -0.543    1.9    125ms
 18   -234.2080269924       -8.42       -4.76   -0.553    3.2    151ms
 19   -234.2080269936       -8.94       -4.98   -0.549    2.8    147ms
 20   -234.2080269937       -9.93       -5.13   -0.550    1.0    107ms
 21   -234.2080269938      -10.18       -5.21   -0.550    1.0    102ms
 22   -234.2080269938      -10.12       -5.30   -0.550    1.0    106ms
 23   -234.2080269939      -10.36       -5.36   -0.550    1.0    101ms
 24   -234.2080269939      -10.16       -5.51   -0.550    1.5    138ms
 25   -234.2080269940      -10.39       -5.64   -0.550    1.1    102ms
 26   -234.2080269940      -10.35       -5.93   -0.550    1.8    116ms
 27   -234.2080269940      -10.80       -6.15   -0.550    2.1    120ms</code></pre><div class="admonition is-warning"><header class="admonition-header">DFTK data formats are not yet fully matured</header><div class="admonition-body"><p>The data format in which DFTK saves data as well as the general interface of the <a href="../../api/#DFTK.load_scfres"><code>load_scfres</code></a> and <a href="../../api/#DFTK.save_scfres-Tuple{AbstractString, NamedTuple}"><code>save_scfres</code></a> pair of functions are not yet fully matured. They have become fairly stable, but we reserve the right to change them incompatibly between DFTK versions (including patch versions) at this point.</p></div></div><h2 id="Writing-VTK-files-for-visualization"><a class="docs-heading-anchor" href="#Writing-VTK-files-for-visualization">Writing VTK files for visualization</a><a id="Writing-VTK-files-for-visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-VTK-files-for-visualization" title="Permalink"></a></h2><p>For visualizing the density or the Kohn-Sham orbitals DFTK supports storing the result of an SCF calculations in the form of VTK files. These can afterwards be visualized using tools such as <a href="https://www.paraview.org/">paraview</a>. Using this feature requires the <a href="https://github.com/jipolanco/WriteVTK.jl/">WriteVTK.jl</a> Julia package.</p><pre><code class="language-julia hljs">using WriteVTK
save_scfres(&quot;iron_afm.vts&quot;, scfres; save_ψ=true);</code></pre><p>This will save the iron calculation above into the file <code>iron_afm.vts</code>, using <code>save_ψ=true</code> to also include the KS orbitals.</p><h2 id="Parsable-data-export-using-json"><a class="docs-heading-anchor" href="#Parsable-data-export-using-json">Parsable data-export using json</a><a id="Parsable-data-export-using-json-1"></a><a class="docs-heading-anchor-permalink" href="#Parsable-data-export-using-json" title="Permalink"></a></h2><p>Many structures in DFTK support the (unexported) <code>todict</code> function, which returns a simplified dictionary representation of the data.</p><pre><code class="language-julia hljs">DFTK.todict(scfres.energies)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Float64} with 9 entries:
  &quot;AtomicNonlocal&quot; =&gt; 0.658038
  &quot;PspCorrection&quot;  =&gt; 6.09595
  &quot;Ewald&quot;          =&gt; -171.89
  &quot;total&quot;          =&gt; -234.208
  &quot;Entropy&quot;        =&gt; -0.038396
  &quot;Kinetic&quot;        =&gt; 79.7538
  &quot;AtomicLocal&quot;    =&gt; -154.422
  &quot;Hartree&quot;        =&gt; 36.1753
  &quot;Xc&quot;             =&gt; -30.541</code></pre><p>This in turn can be easily written to disk using a JSON library. Currently we integrate most closely with <code>JSON3</code>, which is thus recommended.</p><pre><code class="language-julia hljs">using JSON3
open(&quot;iron_afm_energies.json&quot;, &quot;w&quot;) do io
    JSON3.pretty(io, DFTK.todict(scfres.energies))
end
println(read(&quot;iron_afm_energies.json&quot;, String))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">{
    &quot;AtomicNonlocal&quot;: 0.6580384883383674,
    &quot;PspCorrection&quot;: 6.095950350669195,
    &quot;Ewald&quot;: -171.88999401525265,
    &quot;total&quot;: -234.20802699404953,
    &quot;Entropy&quot;: -0.038396036073389636,
    &quot;Kinetic&quot;: 79.7538405703343,
    &quot;AtomicLocal&quot;: -154.42178369967996,
    &quot;Hartree&quot;: 36.17530740372355,
    &quot;Xc&quot;: -30.54099005610897
}</code></pre><p>Once JSON3 is loaded, additionally a convenience function for saving a summary of <code>scfres</code> objects using <code>save_scfres</code> is available:</p><pre><code class="language-julia hljs">using JSON3
save_scfres(&quot;iron_afm.json&quot;, scfres)</code></pre><p>Similarly a summary of the band data (occupations, eigenvalues, εF, etc.) for post-processing can be dumped using <code>save_bands</code>:</p><pre><code class="language-julia hljs">save_bands(&quot;iron_afm_scfres.json&quot;, scfres)</code></pre><p>Notably this function works both for the results obtained by <code>self_consistent_field</code> as well as <code>compute_bands</code>:</p><pre><code class="language-julia hljs">bands = compute_bands(scfres, kline_density=10)
save_bands(&quot;iron_afm_bands.json&quot;, bands)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr33"><span class="sgr1">┌ Warning: </span></span>The provided cell is a supercell: the returned k-path is the standard k-path of the associated primitive cell in the basis of the supercell reciprocal lattice.
<span class="sgr33"><span class="sgr1">│ </span></span>  cell =
<span class="sgr33"><span class="sgr1">│ </span></span>   Spglib.SpglibCell{Float64, Float64, Int64, Float64}
<span class="sgr33"><span class="sgr1">│ </span></span>    lattice:
<span class="sgr33"><span class="sgr1">│ </span></span>      5.41999997388764  0.0  0.0
<span class="sgr33"><span class="sgr1">│ </span></span>      0.0  5.41999997388764  0.0
<span class="sgr33"><span class="sgr1">│ </span></span>      0.0  0.0  5.41999997388764
<span class="sgr33"><span class="sgr1">│ </span></span>    2 atomic positions:
<span class="sgr33"><span class="sgr1">│ </span></span>      0.0  0.0  0.0
<span class="sgr33"><span class="sgr1">│ </span></span>      0.5  0.5  0.5
<span class="sgr33"><span class="sgr1">│ </span></span>    2 atoms:
<span class="sgr33"><span class="sgr1">│ </span></span>      1  1
<span class="sgr33"><span class="sgr1">│ </span></span>    2 magmoms:
<span class="sgr33"><span class="sgr1">│ </span></span>      0.0  0.0
<span class="sgr33"><span class="sgr1">│ </span></span>
<span class="sgr33"><span class="sgr1">└ </span></span><span class="sgr90">@ BrillouinSpglibExt ~/.julia/packages/Brillouin/h7lol/ext/BrillouinSpglibExt.jl:28</span>
<span class="sgr33"><span class="sgr1">┌ Warning: </span></span>Negative ρcore detected: -0.010160696831626084
<span class="sgr33"><span class="sgr1">└ </span></span><span class="sgr90">@ DFTK ~/work/DFTK.jl/DFTK.jl/src/terms/xc.jl:39</span></code></pre><h2 id="Writing-and-reading-JLD2-files"><a class="docs-heading-anchor" href="#Writing-and-reading-JLD2-files">Writing and reading JLD2 files</a><a id="Writing-and-reading-JLD2-files-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-and-reading-JLD2-files" title="Permalink"></a></h2><p>The full state of a DFTK self-consistent field calculation can be stored on disk in form of an <a href="https://github.com/JuliaIO/JLD2.jl">JLD2.jl</a> file. This file can be read from other Julia scripts as well as other external codes supporting the HDF5 file format (since the JLD2 format is based on HDF5). This includes notably <code>h5py</code> to read DFTK output from python.</p><pre><code class="language-julia hljs">using JLD2
save_scfres(&quot;iron_afm.jld2&quot;, scfres)</code></pre><p>Saving such JLD2 files supports some options, such as <code>save_ψ=false</code>, which avoids saving the Bloch waves (much faster and smaller files). Notice that JLD2 files can also be used with <a href="../../api/#DFTK.save_bands-Tuple{AbstractString, NamedTuple}"><code>save_bands</code></a>.</p><p>Since such JLD2 can also be read by DFTK to start or continue a calculation, these can also be used for checkpointing or for transferring results to a different computer. See <a href="../../tricks/scf_checkpoints/#Saving-SCF-results-on-disk-and-SCF-checkpoints">Saving SCF results on disk and SCF checkpoints</a> for details.</p><p>(Cleanup files generated by this notebook.)</p><pre><code class="language-julia hljs">rm.([&quot;iron_afm.vts&quot;, &quot;iron_afm.jld2&quot;,
     &quot;iron_afm.json&quot;, &quot;iron_afm_energies.json&quot;, &quot;iron_afm_scfres.json&quot;,
     &quot;iron_afm_bands.json&quot;]);</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../atomscalculators/">« AtomsCalculators integration</a><a class="docs-footer-nextpage" href="../atomistic_simulation_environment/">Atomistic simulation environment »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 5 December 2024 21:02">Thursday 5 December 2024</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
